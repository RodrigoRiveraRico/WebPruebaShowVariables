<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecciona Nombres</title>
</head>
<body>
    <h2>Selecciona Nombres</h2>
    <form action="/process" method="post">
        <input type="text" name="name" placeholder="Nombre">
        <button type="submit">Agregar Nombre</button>
    </form>
</body>
</html> -->

<!-- ********************* -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecciona Nombres</title>
</head>
<body>
    <h2>Selecciona Nombres</h2>
    <input type="text" id="nameInput" placeholder="Nombre">
    <button onclick="addName()">Agregar Nombre</button>

    <h3>Nombres Seleccionados:</h3>
    <ul id="selectedNames">
        {% for name in selected_names %}
            <li>{{ name }}</li>
        {% endfor %}
    </ul>

    <form action="/process" method="post">
        <input type="hidden" name="selected_names" id="selectedNamesInput">
        <button type="submit">Enviar Nombres Seleccionados</button>
    </form>

    <script>
        var selectedNames = [];

        function addName() {
            var nameInput = document.getElementById("nameInput");
            var name = nameInput.value.trim();
            if (name !== "") {
                if (!selectedNames.includes(name)) {
                    selectedNames.push(name);
                    updateSelectedNames();
                    sendNameToServer(name);
                }
                nameInput.value = "";
            }
        }

        function updateSelectedNames() {
            var selectedNamesList = document.getElementById("selectedNames");
            selectedNamesList.innerHTML = "";
            selectedNames.forEach(function(name) {
                var li = document.createElement("li");
                li.textContent = name;
                selectedNamesList.appendChild(li);
            });
        }

        function sendNameToServer(name) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/add_name", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    // Do something if needed
                }
            };
            xhr.send("name=" + encodeURIComponent(name));
        }

        document.getElementById("selectedNamesInput").value = JSON.stringify(selectedNames);
    </script>
</body>
</html> -->



<!-- **************************  -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Selecciona Nombres</title>
</head>
<body>
    <h2>Selecciona las bases de datos (DB):</h2>
    <input type="text" id="nameInput" placeholder="Nombre" oninput="showSuggestions()">

    <div id="suggestions"></div>

    <button onclick="addName()">Agregar</button>

    <h3>DB seleccionadas:</h3>
    <ul id="selectedNames">
        {% for name in selected_names %}
            <li>{{ name }}</li>
        {% endfor %}
    </ul>

    <form action="/process" method="post">
        <input type="hidden" name="selected_names" id="selectedNamesInput">
        <button type="submit">Enviar DB seleccionadas</button>
    </form>

    <script>
        var selectedNames = [];

        function showSuggestions() {
            var input = document.getElementById("nameInput");
            var value = input.value.trim().toLowerCase();
            var suggestionsContainer = document.getElementById("suggestions");
            suggestionsContainer.innerHTML = "";

            if (value === "") return;

            // Filtrar sugerencias que coincidan con el valor de entrada
            var matches = {{ suggestions | tojson | safe }}.filter(function(suggestion) {
                return suggestion.toLowerCase().startsWith(value);
            });

            // Mostrar sugerencias coincidentes
            matches.forEach(function(suggestion) {
                var suggestionElement = document.createElement("div");
                suggestionElement.textContent = suggestion;
                suggestionElement.onclick = function() {
                    input.value = suggestion;
                    suggestionsContainer.innerHTML = "";
                };
                suggestionsContainer.appendChild(suggestionElement);
            });
        }

        function addName() {
            var nameInput = document.getElementById("nameInput");
            var name = nameInput.value.trim();
            if (name !== "") {
                if (!selectedNames.includes(name)) {
                    selectedNames.push(name);
                    updateSelectedNames();
                    sendNameToServer(name);
                }
                nameInput.value = "";
            }
        }

        function updateSelectedNames() {
            var selectedNamesList = document.getElementById("selectedNames");
            selectedNamesList.innerHTML = "";
            selectedNames.forEach(function(name) {
                var li = document.createElement("li");
                li.textContent = name;
                selectedNamesList.appendChild(li);
            });
        }

        function sendNameToServer(name) {
            var xhr = new XMLHttpRequest();
            xhr.open("POST", "/add_name", true);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    // Do something if needed
                }
            };
            xhr.send("name=" + encodeURIComponent(name));
        }

        document.getElementById("selectedNamesInput").value = JSON.stringify(selectedNames);
    </script>
</body>
</html>





