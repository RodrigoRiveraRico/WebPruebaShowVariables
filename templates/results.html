<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nombres Seleccionados</title>
</head>
<body>
    <h2>Nombres Seleccionados</h2>
    <ul>
        {% for name in names %}
            <li>{{ name }}</li>
        {% endfor %}
    </ul>
</body>
</html> -->


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
</head>
<body>
    <h2>Valores correspondientes a las bases de datos seleccionadas:</h2>
    <ul>
        {% for name in selected_names %}
            <li>{{ name }}: {{ D_c[name] }}</li>
        {% endfor %}
    </ul>
</body>
</html> -->







<!-- List check: -->



<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
</head>
<body>
    <h2>Valores correspondientes a los nombres seleccionados:</h2>
    <ul>
        {% for name in selected_names %}
            <li>{{ name }}: {{ D_c[name] }}</li>
        {% endfor %}
    </ul>

    <form action="/select_variables" method="post">
        <label for="keySelect">Selecciona una clave:</label>
        <select name="key" id="keySelect">
            {% for key in D_c.keys() %}
                <option value="{{ key }}">{{ key }}</option>
            {% endfor %}
        </select>
        <div id="variablesContainer"></div>
        <button type="submit">Enviar Variables Seleccionadas</button>
    </form>

    <script>
        var D_c = {{ D_c | tojson | safe }};

        document.getElementById("keySelect").addEventListener("change", function() {
            var selectedKey = this.value;
            var variablesContainer = document.getElementById("variablesContainer");
            variablesContainer.innerHTML = "";
            D_c[selectedKey].forEach(function(variable) {
                var checkbox = document.createElement("input");
                checkbox.type = "checkbox";
                checkbox.name = "variables";
                checkbox.value = variable;
                var label = document.createElement("label");
                label.textContent = variable;
                variablesContainer.appendChild(checkbox);
                variablesContainer.appendChild(label);
                variablesContainer.appendChild(document.createElement("br"));
            });
        });
    </script>
</body>
</html> -->


<!-- último -->

<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
</head>
<body>
    <h2>Valores correspondientes a los nombres seleccionados:</h2>
    <ul>
        {% for name in selected_names %}
            <li>{{ name }}: {{ D_c[name] }}</li>
        {% endfor %}
    </ul>

    <form id="selectVariablesForm" action="/select_variables" method="post">
        <label for="keySelect">Selecciona una clave:</label>
        <select name="key" id="keySelect">
            {% for key in D_c.keys() %}
                <option value="{{ key }}">{{ key }}</option>
            {% endfor %}
        </select>
        <div id="variablesContainer"></div>
        <button type="button" onclick="addSelectedVariables()">Agregar Valores Seleccionados</button>
        <br>
        <textarea name="selectedValues" id="selectedValues" rows="4" cols="50" readonly></textarea>
        <br>
        <button type="submit">Enviar Valores Seleccionados</button>
    </form>

    <script>
        var D_c = {{ D_c | tojson | safe }};

        function addSelectedVariables() {
            var selectedKey = document.getElementById("keySelect").value;
            var selectedVariables = [];
            var variablesContainer = document.getElementById("variablesContainer");
            var checkboxes = variablesContainer.querySelectorAll('input[type="checkbox"]:checked');
            checkboxes.forEach(function(checkbox) {
                selectedVariables.push(checkbox.value);
                checkbox.checked = false;
            });
            var selectedValuesTextarea = document.getElementById("selectedValues");
            var currentValue = selectedValuesTextarea.value;
            if (currentValue) {
                currentValue += "\n";
            }
            currentValue += selectedKey + ": " + selectedVariables.join(", ");
            selectedValuesTextarea.value = currentValue;
        }
    </script>
</body>
</html> -->



<!-- código medio bueno excepto el diccionario final: -->


<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
</head>
<body>
    <h2>Valores correspondientes a los nombres seleccionados:</h2>
    <ul>
        {% for name in selected_names %}
            <li>{{ name }}: {{ D_c[name] }}</li>
        {% endfor %}
    </ul>

    <form id="selectVariablesForm" action="/select_variables" method="post">
        <label for="keySelect">Selecciona una clave:</label>
        <select name="key" id="keySelect" onchange="updateVariableSelect()">
            {% for key in D_c.keys() %}
                <option value="{{ key }}">{{ key }}</option>
            {% endfor %}
        </select>
        <select name="variables" id="variablesSelect" multiple>


        </select>
        <button type="button" onclick="addSelectedVariables()">Agregar Valores Seleccionados</button>
        <br>
        <textarea name="selectedValues" id="selectedValues" rows="4" cols="50" readonly></textarea>
        <br>
        <button type="submit">Enviar Valores Seleccionados</button>
    </form>



    <script>
        var D_c = {{ D_c | tojson | safe }};

        function updateVariableSelect() {
            var keySelect = document.getElementById("keySelect");
            var selectedKey = keySelect.value;
            var variablesSelect = document.getElementById("variablesSelect");
            variablesSelect.innerHTML = "";
            D_c[selectedKey].forEach(function(variable) {
                var option = document.createElement("option");
                option.value = variable;
                option.text = variable;
                variablesSelect.appendChild(option);
            });
        }

        function addSelectedVariables() {
            var keySelect = document.getElementById("keySelect");
            var selectedKey = keySelect.value;
            var variablesSelect = document.getElementById("variablesSelect");
            var selectedVariables = [];
            for (var i = 0; i < variablesSelect.options.length; i++) {
                if (variablesSelect.options[i].selected) {
                    selectedVariables.push(variablesSelect.options[i].value);
                }
            }
            var selectedValuesTextarea = document.getElementById("selectedValues");
            var currentValue = selectedValuesTextarea.value;
            if (currentValue) {
                currentValue += "\n";
            }
            currentValue += selectedKey + ": " + selectedVariables.join(", ");
            selectedValuesTextarea.value = currentValue;
        }
    </script>
</body>
</html>  -->






<!-- Caja de selección de variables con selección de la clase -->


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resultados</title>
</head>
<body>
    <h2>Valores correspondientes a los nombres seleccionados:</h2>
    <ul>
        {% for name in selected_names %}
            <li>{{ name }}: {{ D_c[name] }}</li>
        {% endfor %}
    </ul>

    <form id="selectVariablesForm" action="/select_variables" method="post">
        <!-- Primer recuadro de selección -->
        <div>
            <label for="keySelect1">Selecciona la base de datos:</label>
            <select name="key1" id="keySelect1" onchange="updateVariableSelect('1')">
                {% for key in D_c.keys() %}
                    <option value="{{ key }}">{{ key }}</option>
                {% endfor %}
            </select>
            <select name="variables1" id="variablesSelect1" multiple>
                

            </select>
            <button type="button" onclick="addSelectedVariables('1')">Agregar Variables Seleccionadas</button>
            <br>
            <textarea name="selectedValues1" id="selectedValues1" rows="4" cols="50" readonly></textarea>
            <input type="hidden" name="selectedVariables1" id="selectedVariables1">
        </div>

        <!-- Segundo recuadro de selección -->
        <div>
            <label for="keySelect2">Base de datos:</label>
            <select name="key2" id="keySelect2" onchange="updateVariableSelect('2')">
                {% for key in D_c.keys() %}
                    <option value="{{ key }}">{{ key }}</option>
                {% endfor %}
            </select>
            <select name="variables2" id="variablesSelect2" multiple>
                <!-- Se llenará dinámicamente con JavaScript -->
            </select>
            <button type="button" onclick="addSelectedVariables('2')">Agregar la clase seleccionada</button>
            <br>
            <textarea name="selectedValues2" id="selectedValues2" rows="4" cols="50" readonly></textarea>
            <input type="hidden" name="selectedVariables2" id="selectedVariables2">
        </div>

        <!-- Botón de envío -->
        <button type="submit">Enviar Valores Seleccionados</button>
    </form>

    <script>
        var D_c = {{ D_c | tojson | safe }};

        function updateVariableSelect(formIndex) {
            var keySelect = document.getElementById("keySelect" + formIndex);
            var selectedKey = keySelect.value;
            var variablesSelect = document.getElementById("variablesSelect" + formIndex);
            variablesSelect.innerHTML = "";
            D_c[selectedKey].forEach(function(variable) {
                var option = document.createElement("option");
                option.value = variable;
                option.text = variable;
                variablesSelect.appendChild(option);
            });
        }

        function addSelectedVariables(formIndex) {
            var keySelect = document.getElementById("keySelect" + formIndex);
            var selectedKey = keySelect.value;
            var variablesSelect = document.getElementById("variablesSelect" + formIndex);
            var selectedVariables = [];
            for (var i = 0; i < variablesSelect.options.length; i++) {
                if (variablesSelect.options[i].selected) {
                    selectedVariables.push(variablesSelect.options[i].value);
                }
            }
            var selectedValuesTextarea = document.getElementById("selectedValues" + formIndex);
            var currentValue = selectedValuesTextarea.value;
            if (currentValue) {
                currentValue += "\n";
            }
            currentValue += selectedKey + ":" + selectedVariables.join(", ");
            selectedValuesTextarea.value = currentValue;


        }
    </script>
</body>
</html>

